<!DOCTYPE html>

<html lang="uk">

<head>

    <meta charset="UTF-8">

    <title>–®–∫–æ–ª–∞ –∞–Ω–≥–ª—ñ–π—Å—å–∫–æ—ó –º–æ–≤–∏</title>

    <meta name="viewport" content="width=device-width, initial-scale=1">



    <style>

        :root {

            --bg: #0f172a;

            --bg-alt: #111827;

            --bg-deep: #020617;

            --border: #1f2937;

            --text: #e5e7eb;

            --muted: #9ca3af;

            --accent: #3b82f6;

        }



        * { box-sizing: border-box; }



        body {

            margin: 0;

            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;

            background: var(--bg);

            color: var(--text);

        }



        html, body { overflow-x: hidden; }



        .app {

            min-height: 100vh;

            max-width: 100%;

            overflow-x: hidden;

            padding-top: 56px;

        }



        header {

            padding: 0 18px;

            background: #020617dd;

            border-bottom: 1px solid var(--border);

            display: flex;

            align-items: center;

            justify-content: space-between;

            position: fixed;

            top: 0;

            left: 0;

            right: 0;

            width: 100%;

            z-index: 50;

            backdrop-filter: blur(10px);

            height: 56px;

            max-height: 56px;

            min-height: 56px;

            box-sizing: border-box;

            overflow: hidden;

            contain: layout style paint;

            transform: translate3d(0, 0, 0);

            will-change: transform;

            isolation: isolate;

            backface-visibility: hidden;

        }



        .logo { 

            font-weight: 700; 

            font-size: 18px; 

            line-height: 1.2;

            flex-shrink: 0;

        }

        header > div:first-child {

            display: flex;

            align-items: center;

            gap: 8px;

            height: 56px;

            max-height: 56px;

            min-height: 56px;

            padding: 14px 0;

            box-sizing: border-box;

            flex-shrink: 0;

            overflow: hidden;

            transform: translate3d(0, 0, 0);

            backface-visibility: hidden;

        }

        header > div:last-child {

            height: 56px;

            max-height: 56px;

            min-height: 56px;

            display: flex;

            align-items: center;

            padding: 14px 0;

            box-sizing: border-box;

            flex-shrink: 0;

            overflow: hidden;

            transform: translate3d(0, 0, 0);

            backface-visibility: hidden;

        }



        .burger {

            width: 32px;

            height: 24px;

            min-width: 32px;

            max-width: 32px;

            min-height: 24px;

            max-height: 24px;

            display: flex;

            flex-direction: column;

            justify-content: space-between;

            cursor: pointer;

            margin-right: 12px;

            flex-shrink: 0;

            position: relative;

            top: 0;

            left: 0;

            transform: translate3d(0, 0, 0);

            will-change: transform;

            backface-visibility: hidden;

        }



        .burger span {

            height: 3px;

            min-height: 3px;

            width: 100%;

            border-radius: 999px;

            background: var(--text);

            transition: transform 0.3s, opacity 0.3s;

            flex-shrink: 0;

            display: block;

        }



        .sidebar {

            position: fixed;

            top: 0;

            left: 0;

            width: 260px;

            height: 100vh;

            background: var(--bg-alt);

            border-right: 1px solid var(--border);

            padding: 16px;

            transform: translateX(-100%);

            transition: transform 0.3s;

            z-index: 40;

        }



        .sidebar.open { transform: translateX(0); }



        .sidebar-title { font-weight: 700; margin-bottom: 12px; }



        .nav {

            display: flex;

            flex-direction: column;

            gap: 8px;

            margin-top: 12px;

        }



        .nav-button {

            width: 100%;

            text-align: left;

            padding: 10px 12px;

            border-radius: 999px;

            border: 1px solid transparent;

            background: transparent;

            color: var(--muted);

            cursor: pointer;

            font-size: 14px;

        }



        .nav-button:hover {

            background: #020617;

            color: var(--text);

        }



        .nav-button.active {

            background: var(--accent);

            color: white;

            border-color: var(--accent);

        }



        .sidebar-small {

            font-size: 12px;

            color: var(--muted);

            margin-top: 16px;

        }



        .overlay {

            position: fixed;

            inset: 0;

            background: rgba(0, 0, 0, 0.5);

            display: none;

            z-index: 30;

        }



        .overlay.show { display: block; }



        .main {

            max-width: 960px;

            margin: 0 auto;

            padding: 20px 16px 40px;

        }



        .page { display: none; }

        .page-active { display: block; }



        h1, h2 { margin-top: 0; margin-bottom: 12px; }

        p { color: var(--muted); }



        .cards {

            display: grid;

            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));

            gap: 16px;

            margin-top: 24px;

        }



        .card {

            background: var(--bg-alt);

            padding: 18px;

            border-radius: 16px;

            border: 1px solid var(--border);

            font-size: 14px;

        }



        .card h3 { margin-top: 0; margin-bottom: 8px; font-size: 16px; }



        .tag {

            display: inline-block;

            font-size: 11px;

            padding: 4px 8px;

            border-radius: 999px;

            background: #1d4ed8;

            color: #e5e7eb;

            margin-bottom: 6px;

        }



        .btn {

            display: inline-block;

            padding: 9px 18px;

            border-radius: 999px;

            border: none;

            cursor: pointer;

            font-size: 14px;

            font-weight: 600;

            text-decoration: none;

        }



        .btn-primary { background: var(--accent); color: white; }

        .btn-primary:hover { background: #2563eb; }



        .btn-outline {

            background: transparent;

            color: var(--text);

            border: 1px solid #374151;

        }

        .btn-outline:hover { background: var(--bg-alt); }



        .btn-telegram { background: #229ED9; color: white; }

        .btn-telegram:hover { background: #1b7ca8; }



        video, img { width: 100%; border-radius: 12px; }



        label {

            display: block;

            margin-bottom: 6px;

            font-size: 13px;

        }



        input, select {

            width: 100%;

            padding: 9px 10px;

            border-radius: 10px;

            border: 1px solid var(--border);

            background: var(--bg-deep);

            color: var(--text);

            margin-bottom: 10px;

            font-size: 14px;

        }



        input:focus, select:focus { outline: 1px solid var(--accent); }



        .error {

            color: #f97373;

            font-size: 13px;

            margin-bottom: 8px;

        }



        .success {

            color: #22c55e;

            font-size: 13px;

            margin-bottom: 8px;

        }



        .info-row {

            display: flex;

            flex-wrap: wrap;

            gap: 12px;

            margin-top: 16px;

        }



        .info-box {

            flex: 1 1 220px;

            background: var(--bg-deep);

            padding: 10px 12px;

            border-radius: 10px;

            border: 1px solid var(--border);

            font-size: 13px;

        }



        footer {

            text-align: center;

            font-size: 12px;

            color: #6b7280;

            border-top: 1px solid var(--border);

            padding: 16px;

            margin-top: 20px;

        }



        .progress {

            width: 100%;

            height: 10px;

            border-radius: 999px;

            background: #020617;

            margin-top: 8px;

            overflow: hidden;

        }

        .progress-bar {

            height: 100%;

            width: 0;

            background: #22c55e;

            transition: width .3s;

        }

        .progress-text {

            font-size: 12px;

            margin-top: 4px;

            color: var(--muted);

        }



        .weeks-list {

            list-style: none;

            padding-left: 0;

            margin-top: 8px;

            font-size: 12px;

        }

        .weeks-list li { margin-bottom: 2px; }



        .week-form-row {

            display: flex;

            flex-wrap: wrap;

            gap: 8px;

            margin-top: 8px;

        }

        .week-form-row input {

            flex: 1 1 140px;

            margin-bottom: 0;

        }

        .week-form-row button {

            flex: 0 0 auto;

            margin-top: 0;

        }



        .auth-tabs {

            display: flex;

            gap: 8px;

            margin-bottom: 16px;

            border-bottom: 1px solid var(--border);

        }



        .auth-tab {

            padding: 10px 16px;

            background: transparent;

            border: none;

            border-bottom: 2px solid transparent;

            color: var(--muted);

            cursor: pointer;

            font-size: 14px;

            font-weight: 500;

            transition: all 0.2s;

        }



        .auth-tab:hover {

            color: var(--text);

        }



        .auth-tab.active {

            color: var(--accent);

            border-bottom-color: var(--accent);

        }



        .auth-form {

            display: none;

        }



        .auth-form.active {

            display: block;

        }



        .message {

            margin-bottom: 12px;

            padding: 10px 12px;

            border-radius: 10px;

            max-width: 80%;

            word-wrap: break-word;

        }



        .message.teacher {

            background: var(--accent);

            color: white;

            margin-left: auto;

            text-align: right;

        }



        .message.student {

            background: var(--bg-alt);

            color: var(--text);

            border: 1px solid var(--border);

        }



        .message-time {

            font-size: 11px;

            opacity: 0.7;

            margin-top: 4px;

        }



        .student-item {

            padding: 12px;

            background: var(--bg-alt);

            border: 1px solid var(--border);

            border-radius: 10px;

            margin-bottom: 8px;

            cursor: pointer;

            transition: background 0.2s;

        }



        .student-item:hover {

            background: var(--bg-deep);

        }



        .student-item.active {

            background: var(--accent);

            color: white;

        }



        @media (min-width: 900px) {

            .app {

                display: grid;

                grid-template-columns: 260px 1fr;

                padding-top: 56px;

            }



            .sidebar {

                position: static;

                height: auto;

                transform: none;

            }



            .main { padding: 24px 32px 40px; }



            .overlay { display: none !important; }



            .burger { display: none; }

        }

    </style>

</head>

<body>

<div class="app">

    <header>

        <div style="display:flex;align-items:center;gap:8px;">

            <div class="burger" id="burger">

                <span></span><span></span><span></span>

            </div>

            <div class="logo">English School</div>

        </div>

        <div>

            <a href="https://t.me/nazardenglish" class="btn btn-telegram" target="_blank">

                –ú—ñ–π Telegram

            </a>

        </div>

    </header>



    <aside class="sidebar" id="sidebar">

        <div class="sidebar-title">–ù–∞–≤—ñ–≥–∞—Ü—ñ—è</div>

        <div class="nav">

            <button class="nav-button active" data-page="home">üè† –ì–æ–ª–æ–≤–Ω–∞</button>

            <button class="nav-button" data-page="tips">üí° –ü—ñ–¥–∫–∞–∑–∫–∏</button>

            <button class="nav-button" data-page="cabinet">üë§ –û—Å–æ–±–∏—Å—Ç–∏–π –∫–∞–±—ñ–Ω–µ—Ç</button>

            <button class="nav-button" data-page="chat">üí¨ –ß–∞—Ç –∑ –≤—á–∏—Ç–µ–ª–µ–º</button>

        </div>

        <div class="sidebar-small">

            –û–±–µ—Ä–∏ –≤–∫–ª–∞–¥–∫—É, –≤–æ–Ω–∞ –≤—ñ–¥–∫—Ä–∏—î—Ç—å—Å—è –ø–æ —Ü–µ–Ω—Ç—Ä—É.<br>

            –ù–∞ —Ç–µ–ª–µ—Ñ–æ–Ω—ñ –º–µ–Ω—é —Ö–æ–≤–∞—î—Ç—å—Å—è –ø—ñ–¥ "—Ç—Ä—å–æ–º–∞ –ø–æ–ª–æ—Å–∫–∞–º–∏".

        </div>

    </aside>



    <div class="overlay" id="overlay"></div>



    <main class="main">

        <!-- –ì–û–õ–û–í–ù–ê -->

        <section class="page page-active" id="page-home">

            <h1>–ü—Ä–∏–≤—ñ—Ç, –º–µ–Ω–µ –∑–≤–∞—Ç–∏ –ù–∞–∑–∞—Ä üëã</h1>

            <p>

                –¶–µ —Å–∞–π—Ç —à–∫–æ–ª–∏ –∞–Ω–≥–ª—ñ–π—Å—å–∫–æ—ó –º–æ–≤–∏. –¢—É—Ç –º–æ–∂–Ω–∞ –¥—ñ–∑–Ω–∞—Ç–∏—Å—è –ø—Ä–æ –∫—É—Ä—Å–∏, –ø–æ–¥–∏–≤–∏—Ç–∏—Å—è —Ñ–æ—Ç–æ —Ç–∞ –≤—ñ–¥–µ–æ –∑ —É—Ä–æ–∫—ñ–≤,

                –∞ —Ç–∞–∫–æ–∂ –∑–∞–π—Ç–∏ –≤ –æ—Å–æ–±–∏—Å—Ç–∏–π –∫–∞–±—ñ–Ω–µ—Ç —É—á–Ω—è.

            </p>



            <a href="#" class="btn btn-primary" onclick="openPage('cabinet');return false;">

                –ü–µ—Ä–µ–π—Ç–∏ –≤ –æ—Å–æ–±–∏—Å—Ç–∏–π –∫–∞–±—ñ–Ω–µ—Ç

            </a>



            <h2 style="margin-top:32px;">–ö—É—Ä—Å–∏</h2>

            <div class="cards">

                <div class="card">

                    <span class="tag">A1‚ÄìA2</span>

                    <h3>–ü–æ—á–∞—Ç–∫–æ–≤–∏–π —Ä—ñ–≤–µ–Ω—å</h3>

                    <p>–ë–∞–∑–æ–≤–∞ –≥—Ä–∞–º–∞—Ç–∏–∫–∞, –∞–ª—Ñ–∞–≤—ñ—Ç, –ø—Ä–æ—Å—Ç—ñ –¥—ñ–∞–ª–æ–≥–∏, –±–∞–≥–∞—Ç–æ —ñ–≥–æ—Ä —Ç–∞ –∫–∞—Ä—Ç–æ–∫.</p>

                </div>

                <div class="card">

                    <span class="tag">B1‚ÄìB2</span>

                    <h3>–°–µ—Ä–µ–¥–Ω—ñ–π —Ä—ñ–≤–µ–Ω—å</h3>

                    <p>–ë—ñ–ª—å—à–µ —Ä–æ–∑–º–æ–≤–Ω–æ—ó –ø—Ä–∞–∫—Ç–∏–∫–∏, –ø—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–æ —à–∫—ñ–ª—å–Ω–∏—Ö –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω–∏—Ö —Ç–∞ —ñ—Å–ø–∏—Ç—ñ–≤.</p>

                </div>

                <div class="card">

                    <span class="tag">Speaking</span>

                    <h3>–†–æ–∑–º–æ–≤–Ω—ñ –∫–ª—É–±–∏</h3>

                    <p>–û–±–≥–æ–≤–æ—Ä—é—î–º–æ —Ñ—ñ–ª—å–º–∏, –º—É–∑–∏–∫—É, —ñ–≥—Ä–∏ —Ç–∞ —Ä–µ–∞–ª—å–Ω—ñ —Ç–µ–º–∏ –∞–Ω–≥–ª—ñ–π—Å—å–∫–æ—é.</p>

                </div>

            </div>



            <h2 style="margin-top:32px;">–ú–µ–¥—ñ–∞</h2>

            <div class="cards">

                <div class="card">

                    <h3>–§–æ—Ç–æ –∑ —É—Ä–æ–∫—É</h3>

                    <p>–°—é–¥–∏ –º–æ–∂–Ω–∞ –ø–æ—Å—Ç–∞–≤–∏—Ç–∏ —Ñ–æ—Ç–æ –∑ –∑–∞–Ω—è—Ç—å.</p>

                    <img src="photo.jpg" alt="–§–æ—Ç–æ —à–∫–æ–ª–∏">

                </div>

                <div class="card">

                    <h3>–í—ñ–¥–µ–æ –∑ –∑–∞–Ω—è—Ç—Ç—è</h3>

                    <p>–¢—É—Ç –º–æ–∂–Ω–∞ –ø–æ–∫–∞–∑—É–≤–∞—Ç–∏ –∫–æ—Ä–æ—Ç–∫–∏–π —Ñ—Ä–∞–≥–º–µ–Ω—Ç —É—Ä–æ–∫—É.</p>

                    <video controls>

                        <source src="lesson.mp4" type="video/mp4">

                        –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø—ñ–¥—Ç—Ä–∏–º—É—î –≤—ñ–¥–µ–æ.

                    </video>

                    <p style="font-size:12px;margin-top:6px;color:#9ca3af;">

                        –ü–æ–∫–ª–∞–¥–∏ —Ñ–∞–π–ª <strong>lesson.mp4</strong> —É —Ç—É –∂ –ø–∞–ø–∫—É, —â–æ –π <strong>index.html</strong>.

                    </p>

                </div>

            </div>

        </section>



        <!-- –ü–Ü–î–ö–ê–ó–ö–ò -->

        <section class="page" id="page-tips">

            <h1>–ü—ñ–¥–∫–∞–∑–∫–∏ –¥–ª—è –≤–∏–≤—á–µ–Ω–Ω—è –∞–Ω–≥–ª—ñ–π—Å—å–∫–æ—ó üí°</h1>

            <p>–¢—É—Ç —É—á–Ω—ñ –º–æ–∂—É—Ç—å –ø—ñ–¥–¥–∏–≤–∏—Ç–∏—Å—è –∫–æ—Ä–∏—Å–Ω—ñ –ø–æ—Ä–∞–¥–∏, —è–∫ –ª–µ–≥—à–µ –≤—á–∏—Ç–∏ –∞–Ω–≥–ª—ñ–π—Å—å–∫—É.</p>



            <div class="cards">

                <div class="card">

                    <h3>–Ø–∫ –≤—á–∏—Ç–∏ —Å–ª–æ–≤–∞</h3>

                    <ul style="padding-left:18px;color:#9ca3af;">

                        <li>–í—á–∏ –Ω–µ –æ–∫—Ä–µ–º—ñ —Å–ª–æ–≤–∞, –∞ —Ñ—Ä–∞–∑–∏ (<em>have breakfast</em> –∑–∞–º—ñ—Å—Ç—å –ø—Ä–æ—Å—Ç–æ <em>breakfast</em>).</li>

                        <li>–ü–æ–≤—Ç–æ—Ä—é–π –ø–æ 5‚Äì10 —Ö–≤–∏–ª–∏–Ω —â–æ–¥–Ω—è, –∞ –Ω–µ 2 –≥–æ–¥–∏–Ω–∏ —Ä–∞–∑ –Ω–∞ –º—ñ—Å—è—Ü—å.</li>

                        <li>–†–æ–±–∏ —Å–≤–æ—ó —Å–ø–∏—Å–∫–∏ —Å–ª—ñ–≤ –ø–æ —Ç–µ–º–∞—Ö: —à–∫–æ–ª–∞, —ó–∂–∞, –ø–æ–¥–æ—Ä–æ–∂—ñ.</li>

                    </ul>

                </div>

                <div class="card">

                    <h3>–©–æ –¥–∏–≤–∏—Ç–∏—Å—è</h3>

                    <ul style="padding-left:18px;color:#9ca3af;">

                        <li>–ú—É–ª—å—Ç—Ñ—ñ–ª—å–º–∏ –∞–±–æ —Å–µ—Ä—ñ–∞–ª–∏ –∑ –∞–Ω–≥–ª—ñ–π—Å—å–∫–∏–º–∏ —Å—É–±—Ç–∏—Ç—Ä–∞–º–∏.</li>

                        <li>–ö–æ—Ä–æ—Ç–∫—ñ –≤—ñ–¥–µ–æ –Ω–∞ YouTube –¥–ª—è —Ä—ñ–≤–Ω—è A1‚ÄìB1.</li>

                        <li>–°–ø–æ—á–∞—Ç–∫—É —Å–ª—É—Ö–∞–π, –∞ –ø–æ—Ç—ñ–º –≤–∂–µ –ø—ñ–¥–≥–ª—è–¥–∞–π —É –ø–µ—Ä–µ–∫–ª–∞–¥.</li>

                    </ul>

                </div>

                <div class="card">

                    <h3>–Ø–∫ –Ω–µ —Å–æ—Ä–æ–º–∏—Ç–∏—Å—å –≥–æ–≤–æ—Ä–∏—Ç–∏</h3>

                    <ul style="padding-left:18px;color:#9ca3af;">

                        <li>–†–æ–∑–º–æ–≤–ª—è–π —ñ–∑ –æ–¥–Ω–æ–∫–ª–∞—Å–Ω–∏–∫–∞–º–∏ –∞–Ω–≥–ª—ñ–π—Å—å–∫–æ—é —Ö–æ—á–∞ –± 5 —Ö–≤–∏–ª–∏–Ω –Ω–∞ —É—Ä–æ—Ü—ñ.</li>

                        <li>–ù–µ –±—ñ–π—Å—è –ø–æ–º–∏–ª–æ–∫ ‚Äì —Ü–µ –Ω–æ—Ä–º–∞–ª—å–Ω–∞ —á–∞—Å—Ç–∏–Ω–∞ –Ω–∞–≤—á–∞–Ω–Ω—è.</li>

                        <li>–ó–∞–ø–∏—Å—É–π —Å–µ–±–µ –Ω–∞ –≤—ñ–¥–µ–æ –π —Å–ª—É—Ö–∞–π, —è–∫ –∑–≤—É—á–∏—à.</li>

                    </ul>

                </div>

            </div>

        </section>



        <!-- –ö–ê–ë–Ü–ù–ï–¢ -->

        <section class="page" id="page-cabinet">

            <h1>–û—Å–æ–±–∏—Å—Ç–∏–π –∫–∞–±—ñ–Ω–µ—Ç —É—á–Ω—è üë§</h1>

            <p>

                –¢—É—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ–π–Ω–∏–π –≤—Ö—ñ–¥ —É –∫–∞–±—ñ–Ω–µ—Ç.<br>

                –î–∞–Ω—ñ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –Ω–∞ Firebase (–∞–∫–∞—É–Ω—Ç + –ø—Ä–æ–≥—Ä–µ—Å).

            </p>



            <div class="card" id="login-section">

                <h2 style="margin-top:0;">–í—Ö—ñ–¥ / –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è</h2>

                <p style="font-size:13px;margin-bottom:10px;">

                    –û–±–µ—Ä—ñ—Ç—å, —á–∏ —Ö–æ—á–µ—Ç–µ —É–≤—ñ–π—Ç–∏ –≤ —ñ—Å–Ω—É—é—á–∏–π –∞–∫–∞—É–Ω—Ç, —á–∏ –∑–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏ –Ω–æ–≤–∏–π.

                </p>



                <div class="auth-tabs">

                    <button class="auth-tab active" data-tab="login">–í—Ö—ñ–¥</button>

                    <button class="auth-tab" data-tab="register">–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è</button>

                </div>



                <div id="error" class="error" style="display:none;"></div>

                <div id="success" class="success" style="display:none;"></div>



                <!-- –§–æ—Ä–º–∞ –≤—Ö–æ–¥—É -->

                <form id="login-form" class="auth-form active">

                    <label for="login-email">Email</label>

                    <input type="email" id="login-email" name="email"

                           placeholder="–í–≤–µ–¥—ñ—Ç—å —Å–≤–æ—é –ø–æ—à—Ç—É" required>



                    <label for="login-password">–ü–∞—Ä–æ–ª—å</label>

                    <input type="password" id="login-password" name="password"

                           placeholder="–í–≤–µ–¥—ñ—Ç—å –ø–∞—Ä–æ–ª—å" required>



                    <button type="submit" class="btn btn-primary">–£–≤—ñ–π—Ç–∏</button>

                </form>



                <!-- –§–æ—Ä–º–∞ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó -->

                <form id="register-form" class="auth-form">

                    <label for="register-firstname">–Ü–º'—è</label>

                    <input type="text" id="register-firstname" name="firstname"

                           placeholder="–í–≤–µ–¥—ñ—Ç—å –≤–∞—à–µ —ñ–º'—è" required>



                    <label for="register-lastname">–ü—Ä—ñ–∑–≤–∏—â–µ</label>

                    <input type="text" id="register-lastname" name="lastname"

                           placeholder="–í–≤–µ–¥—ñ—Ç—å –≤–∞—à–µ –ø—Ä—ñ–∑–≤–∏—â–µ" required>



                    <label for="register-email">Email</label>

                    <input type="email" id="register-email" name="email"

                           placeholder="–í–≤–µ–¥—ñ—Ç—å —Å–≤–æ—é –ø–æ—à—Ç—É" required>



                    <label for="register-password">–ü–∞—Ä–æ–ª—å</label>

                    <input type="password" id="register-password" name="password"

                           placeholder="–í–≤–µ–¥—ñ—Ç—å –ø–∞—Ä–æ–ª—å (–º—ñ–Ω—ñ–º—É–º 6 —Å–∏–º–≤–æ–ª—ñ–≤)" required minlength="6">



                    <label for="register-password-confirm">–ü—ñ–¥—Ç–≤–µ—Ä–¥—ñ—Ç—å –ø–∞—Ä–æ–ª—å</label>

                    <input type="password" id="register-password-confirm" name="passwordConfirm"

                           placeholder="–í–≤–µ–¥—ñ—Ç—å –ø–∞—Ä–æ–ª—å —â–µ —Ä–∞–∑" required minlength="6">



                    <button type="submit" class="btn btn-primary">–ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è</button>

                </form>

            </div>



            <div class="card" id="cabinet-section" style="display:none;margin-top:20px;">

                <h2 style="margin-top:0;">–í—ñ—Ç–∞—é –≤ –∫–∞–±—ñ–Ω–µ—Ç—ñ üëã</h2>

                <p>–í–∏ –∑–∞–π—à–ª–∏ —è–∫: <strong id="user-email"></strong></p>



                <div class="info-row">

                    <div class="info-box">

                        <strong>–í–∞—à —Ä—ñ–≤–µ–Ω—å:</strong><br>

                        <select id="level-select">

                            <option value="A1 ‚Äì Beginner">A1 ‚Äì Beginner</option>

                            <option value="A2 ‚Äì Elementary">A2 ‚Äì Elementary</option>

                            <option value="B1 ‚Äì Intermediate">B1 ‚Äì Intermediate</option>

                            <option value="B2 ‚Äì Upper-Intermediate">B2 ‚Äì Upper-Intermediate</option>

                            <option value="C1 ‚Äì Advanced">C1 ‚Äì Advanced</option>

                        </select>

                    </div>

                    <div class="info-box">

                        <strong>–ì—Ä—É–ø–∞:</strong><br>

                        <input id="group-input" type="text" placeholder="–ù–∞–ø—Ä. Teens Group #3">

                    </div>

                    <div class="info-box">

                        <strong>–†–æ–∑–∫–ª–∞–¥:</strong><br>

                        <input id="schedule-input" type="text" placeholder="–ü–Ω / –°—Ä / –ü—Ç ‚Äì 17:00">

                    </div>

                </div>



                <div class="info-row">

                    <div class="info-box">

                        <strong>–ü—Ä–æ–≥—Ä–µ—Å –ø–æ —É—Ä–æ–∫–∞—Ö:</strong><br>

                        <div style="margin-top:6px;font-size:12px;">

                            –ü—Ä–æ–π–¥–µ–Ω–æ —É—Ä–æ–∫—ñ–≤:

                            <input type="number" id="lessons-done" min="0" value="0" style="width:80px;display:inline-block;">

                            –∑

                            <input type="number" id="lessons-total" min="1" value="20" style="width:80px;display:inline-block;">

                        </div>

                        <div class="progress">

                            <div class="progress-bar" id="lessons-progress-bar"></div>

                        </div>

                        <div class="progress-text" id="lessons-progress-text"></div>

                    </div>



                    <div class="info-box">

                        <strong>–°–ª–æ–≤–∞:</strong><br>

                        <div style="margin-top:6px;font-size:12px;">

                            –í–∏–≤—á–µ–Ω–æ —Å–ª—ñ–≤:

                            <input type="number" id="words-learned" min="0" value="0" style="width:80px;display:inline-block;">

                            –∑ —Ü—ñ–ª—ñ

                            <input type="number" id="words-goal" min="1" value="100" style="width:80px;display:inline-block;">

                        </div>

                        <div class="progress">

                            <div class="progress-bar" id="words-progress-bar"></div>

                        </div>

                        <div class="progress-text" id="words-progress-text"></div>

                    </div>

                </div>



                <div class="info-row">

                    <div class="info-box" style="flex:1 1 100%;">

                        <strong>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ç–∏–∂–Ω—è—Ö (—Å–∫—ñ–ª—å–∫–∏ —É—Ä–æ–∫—ñ–≤ –ø—Ä–æ–≤–µ–¥–µ–Ω–æ):</strong>

                        <div class="week-form-row">

                            <input type="week" id="week-input">

                            <input type="number" id="week-lessons" min="0" placeholder="–£—Ä–æ–∫—ñ–≤ –∑–∞ —Ç–∏–∂–¥–µ–Ω—å">

                            <button id="add-week-btn" type="button" class="btn btn-outline">–î–æ–¥–∞—Ç–∏ —Ç–∏–∂–¥–µ–Ω—å</button>

                        </div>

                        <ul id="weeks-list" class="weeks-list"></ul>

                    </div>

                </div>



                <button id="logout-btn" class="btn btn-outline" style="margin-top:14px;">

                    –í–∏–π—Ç–∏ –∑ –∞–∫–∞—É–Ω—Ç–∞

                </button>

            </div>

        </section>



        <!-- –ß–ê–¢ -->

        <section class="page" id="page-chat">

            <h1>–ß–∞—Ç –∑ –≤—á–∏—Ç–µ–ª–µ–º üí¨</h1>



            <!-- –î–ª—è –≤—á–∏—Ç–µ–ª—è: —Å–ø–∏—Å–æ–∫ —É—á–Ω—ñ–≤ -->

            <div id="teacher-view" style="display:none;">

                <div class="card">

                    <h2 style="margin-top:0;">–°–ø–∏—Å–æ–∫ —É—á–Ω—ñ–≤</h2>

                    <p>–û–±–µ—Ä—ñ—Ç—å —É—á–Ω—è –¥–ª—è –ø–µ—Ä–µ–≥–ª—è–¥—É –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å:</p>

                    <div id="students-list" style="margin-top:16px;"></div>

                </div>



                <div class="card" id="teacher-chat-section" style="display:none;margin-top:20px;">

                    <h2 style="margin-top:0;">–ß–∞—Ç –∑ <span id="selected-student-name"></span></h2>

                    <div id="teacher-messages" style="max-height:400px;overflow-y:auto;margin-bottom:16px;padding:12px;background:var(--bg-deep);border-radius:10px;border:1px solid var(--border);"></div>

                    <div style="display:flex;gap:8px;">

                        <input type="text" id="teacher-message-input" placeholder="–í–≤–µ–¥—ñ—Ç—å –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è..." style="flex:1;margin-bottom:0;">

                        <button id="teacher-send-btn" class="btn btn-primary">–í—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏</button>

                    </div>

                    <button id="back-to-students" class="btn btn-outline" style="margin-top:12px;">–ù–∞–∑–∞–¥ –¥–æ —Å–ø–∏—Å–∫—É</button>

                </div>

            </div>



            <!-- –î–ª—è —É—á–Ω—è: —á–∞—Ç –∑ –≤—á–∏—Ç–µ–ª–µ–º -->

            <div id="student-view" style="display:none;">

                <div class="card">

                    <h2 style="margin-top:0;">–í–∞—à—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è</h2>

                    <div id="student-messages" style="max-height:400px;overflow-y:auto;margin-bottom:16px;padding:12px;background:var(--bg-deep);border-radius:10px;border:1px solid var(--border);"></div>

                    <div style="display:flex;gap:8px;">

                        <input type="text" id="student-message-input" placeholder="–í–≤–µ–¥—ñ—Ç—å –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è..." style="flex:1;margin-bottom:0;">

                        <button id="student-send-btn" class="btn btn-primary">–í—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏</button>

                    </div>

                </div>

            </div>



            <!-- –Ø–∫—â–æ –Ω–µ –∑–∞–ª–æ–≥—ñ–Ω–µ–Ω–∏–π -->

            <div id="chat-login-prompt" class="card">

                <p>–î–ª—è –¥–æ—Å—Ç—É–ø—É –¥–æ —á–∞—Ç—É –ø–æ—Ç—Ä—ñ–±–Ω–æ —É–≤—ñ–π—Ç–∏ –≤ –∞–∫–∞—É–Ω—Ç.</p>

                <a href="#" class="btn btn-primary" onclick="openPage('cabinet');return false;">–£–≤—ñ–π—Ç–∏</a>

            </div>

        </section>



    </main>

</div>



<footer>

    ¬© <span id="year"></span> English School. –ó—Ä–æ–±–ª–µ–Ω–æ –ù–∞–∑–∞—Ä–æ–º.

</footer>



<!-- Firebase SDK —á–µ—Ä–µ–∑ CDN (compat) -->

<script src="https://www.gstatic.com/firebasejs/11.0.1/firebase-app-compat.js"></script>

<script src="https://www.gstatic.com/firebasejs/11.0.1/firebase-auth-compat.js"></script>

<script src="https://www.gstatic.com/firebasejs/11.0.1/firebase-database-compat.js"></script>



<script>

  const firebaseConfig = {

    apiKey: "AIzaSyCx9TCFKNHyjFSOasZETUFIPdv7xt7kD6s",

    authDomain: "project-6159663906776517660.firebaseapp.com",

    databaseURL: "https://project-6159663906776517660-default-rtdb.firebaseio.com",

    projectId: "project-6159663906776517660",

    storageBucket: "project-6159663906776517660.firebasestorage.app",

    messagingSenderId: "393177783460",

    appId: "1:393177783460:web:8e1c38fdb1392ad7819a31",

    measurementId: "G-HHNPZXF359"

  };



  firebase.initializeApp(firebaseConfig);

  const auth = firebase.auth();

  const db = firebase.database();

</script>



<script>

    document.getElementById("year").textContent = new Date().getFullYear();



    const burger = document.getElementById("burger");

    const sidebar = document.getElementById("sidebar");

    const overlay = document.getElementById("overlay");

    const navButtons = document.querySelectorAll(".nav-button");



    function openSidebar() {

        sidebar.classList.add("open");

        overlay.classList.add("show");

    }

    function closeSidebar() {

        sidebar.classList.remove("open");

        overlay.classList.remove("show");

    }

    if (burger) burger.addEventListener("click", openSidebar);

    if (overlay) overlay.addEventListener("click", closeSidebar);



    function openPage(pageName) {

        navButtons.forEach(btn => {

            btn.classList.toggle("active", btn.dataset.page === pageName);

        });

        document.querySelectorAll(".page").forEach(page => {

            page.classList.remove("page-active");

        });

        const target = document.getElementById("page-" + pageName);

        if (target) target.classList.add("page-active");

        closeSidebar();

        

        // –Ø–∫—â–æ –≤—ñ–¥–∫—Ä–∏–≤–∞—î—Ç—å—Å—è —á–∞—Ç, –ø–æ–∫–∞–∑—É—î–º–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏–π view

        if (pageName === "chat") {

            showChatView();

        }

    }

    navButtons.forEach(btn => {

        btn.addEventListener("click", () => openPage(btn.dataset.page));

    });



    // –ü–µ—Ä–µ–º–∏–∫–∞—á –º—ñ–∂ —Ñ–æ—Ä–º–∞–º–∏ –≤—Ö–æ–¥—É —Ç–∞ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó

    const authTabs = document.querySelectorAll(".auth-tab");

    const loginForm = document.getElementById("login-form");

    const registerForm = document.getElementById("register-form");



    authTabs.forEach(tab => {

        tab.addEventListener("click", () => {

            const tabType = tab.dataset.tab;

            authTabs.forEach(t => t.classList.remove("active"));

            tab.classList.add("active");



            loginForm.classList.toggle("active", tabType === "login");

            registerForm.classList.toggle("active", tabType === "register");



            document.getElementById("error").style.display = "none";

            document.getElementById("success").style.display = "none";

        });

    });



    const loginSection = document.getElementById("login-section");

    const cabinetSection = document.getElementById("cabinet-section");

    const userEmailSpan = document.getElementById("user-email");

    const errorBox = document.getElementById("error");

    const successBox = document.getElementById("success");

    const logoutBtn = document.getElementById("logout-btn");



    const levelSelect = document.getElementById("level-select");

    const groupInput = document.getElementById("group-input");

    const scheduleInput = document.getElementById("schedule-input");



    const lessonsDoneInput = document.getElementById("lessons-done");

    const lessonsTotalInput = document.getElementById("lessons-total");

    const lessonsProgressBar = document.getElementById("lessons-progress-bar");

    const lessonsProgressText = document.getElementById("lessons-progress-text");



    const wordsLearnedInput = document.getElementById("words-learned");

    const wordsGoalInput = document.getElementById("words-goal");

    const wordsProgressBar = document.getElementById("words-progress-bar");

    const wordsProgressText = document.getElementById("words-progress-text");



    const weekInput = document.getElementById("week-input");

    const weekLessonsInput = document.getElementById("week-lessons");

    const addWeekBtn = document.getElementById("add-week-btn");

    const weeksList = document.getElementById("weeks-list");



    let currentUser = null;

    let currentProfile = null;



    function defaultProfile() {

        return {

            firstname: "",

            lastname: "",

            level: "A2 ‚Äì Elementary",

            group: "Teens Group #3",

            schedule: "–ü–Ω / –°—Ä / –ü—Ç ‚Äì 17:00",

            lessonsDone: 12,

            lessonsTotal: 20,

            wordsLearned: 0,

            wordsGoal: 100,

            weeks: []

        };

    }



    async function loadProfile(uid) {

        try {

            const snap = await db.ref("profiles/" + uid).get();

            if (!snap.exists()) {

                const prof = defaultProfile();

                await db.ref("profiles/" + uid).set(prof);

                return prof;

            }

            return snap.val();

        } catch (e) {

            console.error("loadProfile error", e);

            return defaultProfile();

        }

    }



    function saveProfile() {

        if (!currentUser || !currentProfile) return;

        db.ref("profiles/" + currentUser.uid).set(currentProfile).catch(console.error);

    }



    function updateLessonsProgress() {

        const done = Math.max(0, Number(currentProfile.lessonsDone) || 0);

        const total = Math.max(1, Number(currentProfile.lessonsTotal) || 1);

        const percent = Math.min(100, Math.round(done / total * 100));

        lessonsProgressBar.style.width = percent + "%";

        lessonsProgressText.textContent = `${done} –∑ ${total} —É—Ä–æ–∫—ñ–≤ (${percent}%)`;

    }



    function updateWordsProgress() {

        const learned = Math.max(0, Number(currentProfile.wordsLearned) || 0);

        const goal = Math.max(1, Number(currentProfile.wordsGoal) || 1);

        const percent = Math.min(100, Math.round(learned / goal * 100));

        wordsProgressBar.style.width = percent + "%";

        wordsProgressText.textContent = `${learned} / ${goal} —Å–ª—ñ–≤ (${percent}%)`;

    }



    function renderWeeks() {

        weeksList.innerHTML = "";

        if (!currentProfile.weeks || currentProfile.weeks.length === 0) {

            const li = document.createElement("li");

            li.textContent = "–©–µ –Ω–µ–º–∞—î –∑–∞–ø–∏—Å—ñ–≤ –ø–æ —Ç–∏–∂–Ω—è—Ö.";

            weeksList.appendChild(li);

            return;

        }

        currentProfile.weeks.forEach(item => {

            const li = document.createElement("li");

            const label = item.week || "–ë–µ–∑ –¥–∞—Ç–∏";

            li.textContent = `${label}: ${item.lessons} —É—Ä–æ–∫—ñ–≤`;

            weeksList.appendChild(li);

        });

    }



    function applyProfileToUI() {

        if (!currentProfile) return;

        levelSelect.value = currentProfile.level || "A2 ‚Äì Elementary";

        groupInput.value = currentProfile.group || "";

        scheduleInput.value = currentProfile.schedule || "";



        lessonsDoneInput.value = currentProfile.lessonsDone ?? 0;

        lessonsTotalInput.value = currentProfile.lessonsTotal ?? 20;

        wordsLearnedInput.value = currentProfile.wordsLearned ?? 0;

        wordsGoalInput.value = currentProfile.wordsGoal ?? 100;



        updateLessonsProgress();

        updateWordsProgress();

        renderWeeks();

    }



    async function showCabinet(user) {

        currentUser = user;

        userEmailSpan.textContent = user.email;

        loginSection.style.display = "none";

        cabinetSection.style.display = "block";

        currentProfile = await loadProfile(user.uid);

        applyProfileToUI();

    }



    function showLogin() {

        currentUser = null;

        currentProfile = null;

        loginSection.style.display = "block";

        cabinetSection.style.display = "none";

        errorBox.style.display = "none";

        successBox.style.display = "none";

    }



    auth.onAuthStateChanged(async (user) => {

        if (user) {

            errorBox.style.display = "none";

            await showCabinet(user);

            

            // –Ø–∫—â–æ –≤—ñ–¥–∫—Ä–∏—Ç–∞ –≤–∫–ª–∞–¥–∫–∞ —á–∞—Ç—É, –æ–Ω–æ–≤–ª—é—î–º–æ —ó—ó

            if (document.getElementById("page-chat")?.classList.contains("page-active")) {

                showChatView();

            }

        } else {

            showLogin();

            

            // –ó—É–ø–∏–Ω—è—î–º–æ listener —á–∞—Ç—É –ø—Ä–∏ –≤–∏—Ö–æ–¥—ñ

            if (chatListener) {

                const chatPath = selectedStudentId 

                    ? `chats/${selectedStudentId}` 

                    : (currentUser ? `chats/${currentUser.uid}` : null);

                if (chatPath) db.ref(chatPath).off("value", chatListener);

                chatListener = null;

                selectedStudentId = null;

            }

        }

    });



    // –û–±—Ä–æ–±–∫–∞ —Ñ–æ—Ä–º–∏ –≤—Ö–æ–¥—É

    if (loginForm) {

        loginForm.addEventListener("submit", async function (e) {

            e.preventDefault();

            const email = document.getElementById("login-email").value.trim();

            const password = document.getElementById("login-password").value.trim();



            errorBox.style.display = "none";

            successBox.style.display = "none";



            try {

                const userCredential = await auth.signInWithEmailAndPassword(email, password);

                errorBox.style.display = "none";

                await showCabinet(userCredential.user);

            } catch (err) {

                console.error(err);

                let errorMessage = "–ü–æ–º–∏–ª–∫–∞ –≤—Ö–æ–¥—É: ";

                if (err.code === "auth/user-not-found") {

                    errorMessage += "–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑ —Ç–∞–∫–∏–º email –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ. –ó–∞—Ä–µ—î—Å—Ç—Ä—É–π—Ç–µ—Å—è —Å–ø–æ—á–∞—Ç–∫—É.";

                } else if (err.code === "auth/wrong-password") {

                    errorMessage += "–ù–µ–≤—ñ—Ä–Ω–∏–π –ø–∞—Ä–æ–ª—å.";

                } else if (err.code === "auth/invalid-email") {

                    errorMessage += "–ù–µ–≤—ñ—Ä–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç email.";

                } else {

                    errorMessage += err.message || "–ù–µ–≤—ñ–¥–æ–º–∞ –ø–æ–º–∏–ª–∫–∞.";

                }

                errorBox.textContent = errorMessage;

                errorBox.style.display = "block";

            }

        });

    }



    // –û–±—Ä–æ–±–∫–∞ —Ñ–æ—Ä–º–∏ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó

    if (registerForm) {

        registerForm.addEventListener("submit", async function (e) {

            e.preventDefault();

            const firstname = document.getElementById("register-firstname").value.trim();

            const lastname = document.getElementById("register-lastname").value.trim();

            const email = document.getElementById("register-email").value.trim();

            const password = document.getElementById("register-password").value.trim();

            const passwordConfirm = document.getElementById("register-password-confirm").value.trim();



            errorBox.style.display = "none";

            successBox.style.display = "none";



            // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø–∞—Ä–æ–ª—ñ–≤

            if (password !== passwordConfirm) {

                errorBox.textContent = "–ü–∞—Ä–æ–ª—ñ –Ω–µ —Å–ø—ñ–≤–ø–∞–¥–∞—é—Ç—å!";

                errorBox.style.display = "block";

                return;

            }

            if (password.length < 6) {

                errorBox.textContent = "–ü–∞—Ä–æ–ª—å –ø–æ–≤–∏–Ω–µ–Ω –º—ñ—Å—Ç–∏—Ç–∏ –º—ñ–Ω—ñ–º—É–º 6 —Å–∏–º–≤–æ–ª—ñ–≤!";

                errorBox.style.display = "block";

                return;

            }



            try {

                const userCredential = await auth.createUserWithEmailAndPassword(email, password);

                

                // –ó–±–µ—Ä—ñ–≥–∞—î–º–æ —ñ–º'—è —Ç–∞ –ø—Ä—ñ–∑–≤–∏—â–µ –≤ –ø—Ä–æ—Ñ—ñ–ª—å

                const profile = defaultProfile();

                profile.firstname = firstname;

                profile.lastname = lastname;

                profile.email = email;

                await db.ref("profiles/" + userCredential.user.uid).set(profile);

                

                successBox.textContent = "–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è —É—Å–ø—ñ—à–Ω–∞! –í—ñ—Ç–∞—î–º–æ!";

                successBox.style.display = "block";

                await showCabinet(userCredential.user);

            } catch (err) {

                console.error(err);

                let errorMessage = "–ü–æ–º–∏–ª–∫–∞ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó: ";

                if (err.code === "auth/email-already-in-use") {

                    errorMessage += "–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –∑ —Ç–∞–∫–∏–º email –≤–∂–µ —ñ—Å–Ω—É—î. –°–ø—Ä–æ–±—É–π—Ç–µ —É–≤—ñ–π—Ç–∏.";

                } else if (err.code === "auth/invalid-email") {

                    errorMessage += "–ù–µ–≤—ñ—Ä–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç email.";

                } else if (err.code === "auth/weak-password") {

                    errorMessage += "–ü–∞—Ä–æ–ª—å –∑–∞–Ω–∞–¥—Ç–æ —Å–ª–∞–±–∫–∏–π. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –º—ñ–Ω—ñ–º—É–º 6 —Å–∏–º–≤–æ–ª—ñ–≤.";

                } else {

                    errorMessage += err.message || "–ù–µ–≤—ñ–¥–æ–º–∞ –ø–æ–º–∏–ª–∫–∞.";

                }

                errorBox.textContent = errorMessage;

                errorBox.style.display = "block";

            }

        });

    }



    if (logoutBtn) {

        logoutBtn.addEventListener("click", function () {

            auth.signOut().catch(console.error);

        });

    }



    levelSelect.addEventListener("change", () => {

        if (!currentProfile) return;

        currentProfile.level = levelSelect.value;

        saveProfile();

    });

    groupInput.addEventListener("input", () => {

        if (!currentProfile) return;

        currentProfile.group = groupInput.value;

        saveProfile();

    });

    scheduleInput.addEventListener("input", () => {

        if (!currentProfile) return;

        currentProfile.schedule = scheduleInput.value;

        saveProfile();

    });



    lessonsDoneInput.addEventListener("input", () => {

        if (!currentProfile) return;

        currentProfile.lessonsDone = Number(lessonsDoneInput.value) || 0;

        updateLessonsProgress();

        saveProfile();

    });

    lessonsTotalInput.addEventListener("input", () => {

        if (!currentProfile) return;

        currentProfile.lessonsTotal = Number(lessonsTotalInput.value) || 1;

        updateLessonsProgress();

        saveProfile();

    });



    wordsLearnedInput.addEventListener("input", () => {

        if (!currentProfile) return;

        currentProfile.wordsLearned = Number(wordsLearnedInput.value) || 0;

        updateWordsProgress();

        saveProfile();

    });

    wordsGoalInput.addEventListener("input", () => {

        if (!currentProfile) return;

        currentProfile.wordsGoal = Number(wordsGoalInput.value) || 1;

        updateWordsProgress();

        saveProfile();

    });



    addWeekBtn.addEventListener("click", () => {

        if (!currentProfile) return;

        const week = weekInput.value || "–¢–∏–∂–¥–µ–Ω—å –±–µ–∑ –¥–∞—Ç–∏";

        const lessons = Number(weekLessonsInput.value);

        if (isNaN(lessons) || lessons < 0) return;

        if (!currentProfile.weeks) currentProfile.weeks = [];

        currentProfile.weeks.push({ week, lessons });

        weekLessonsInput.value = "";

        renderWeeks();

        saveProfile();

    });



    // ========== –ß–ê–¢ ==========

    // Email –≤—á–∏—Ç–µ–ª—è - –ó–ú–Ü–ù–Ü–¢–¨ –ù–ê –°–í–Ü–ô EMAIL!

    const TEACHER_EMAIL = "rabtor17da@gmail.com"; // <-- –ó–ú–Ü–ù–Ü–¢–¨ –¶–ï –ù–ê –°–í–Ü–ô EMAIL!



    let selectedStudentId = null;

    let chatListener = null;



    function isTeacher(user) {

        return user && user.email === TEACHER_EMAIL;

    }



    async function loadStudentsList() {

        try {

            const snap = await db.ref("profiles").get();

            const studentsList = document.getElementById("students-list");

            studentsList.innerHTML = "";

            

            if (!snap.exists()) {

                studentsList.innerHTML = "<p>–ü–æ–∫–∏ —â–æ –Ω–µ–º–∞—î –∑–∞—Ä–µ—î—Å—Ç—Ä–æ–≤–∞–Ω–∏—Ö —É—á–Ω—ñ–≤.</p>";

                return;

            }

            

            const profiles = snap.val();

            const students = [];

            

            for (const uid in profiles) {

                const profile = profiles[uid];

                if (profile.firstname && profile.lastname) {

                    students.push({

                        uid: uid,

                        firstname: profile.firstname || "",

                        lastname: profile.lastname || "",

                        email: profile.email || ""

                    });

                }

            }

            

            if (students.length === 0) {

                studentsList.innerHTML = "<p>–ü–æ–∫–∏ —â–æ –Ω–µ–º–∞—î –∑–∞—Ä–µ—î—Å—Ç—Ä–æ–≤–∞–Ω–∏—Ö —É—á–Ω—ñ–≤.</p>";

                return;

            }

            

            students.forEach(student => {

                const div = document.createElement("div");

                div.className = "student-item";

                div.textContent = `${student.firstname} ${student.lastname} (${student.email})`;

                div.onclick = () => selectStudent(student.uid, student.firstname, student.lastname);

                studentsList.appendChild(div);

            });

            

        } catch (e) {

            console.error("loadStudentsList error", e);

        }

    }



    function selectStudent(uid, firstname, lastname) {

        selectedStudentId = uid;

        document.getElementById("selected-student-name").textContent = `${firstname} ${lastname}`;

        document.getElementById("teacher-chat-section").style.display = "block";

        

        // –ü—ñ–¥—Å–≤—ñ—á—É—î–º–æ –≤–∏–±—Ä–∞–Ω–æ–≥–æ —É—á–Ω—è

        document.querySelectorAll(".student-item").forEach(item => {

            item.classList.remove("active");

            if (item.textContent.includes(firstname) && item.textContent.includes(lastname)) {

                item.classList.add("active");

            }

        });

        

        loadChatMessages(uid);

    }



    function backToStudents() {

        selectedStudentId = null;

        document.getElementById("teacher-chat-section").style.display = "none";

        if (chatListener) {

            db.ref(`chats/${selectedStudentId}`).off("value", chatListener);

            chatListener = null;

        }

    }



    async function loadChatMessages(otherUserId) {

        const messagesDiv = isTeacher(currentUser) 

            ? document.getElementById("teacher-messages")

            : document.getElementById("student-messages");

            

        messagesDiv.innerHTML = "";

        

        // –ó—É–ø–∏–Ω—è—î–º–æ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ–π listener

        if (chatListener) {

            const chatPath = isTeacher(currentUser) 

                ? `chats/${otherUserId}` 

                : `chats/${currentUser.uid}`;

            db.ref(chatPath).off("value", chatListener);

        }

        

        const chatPath = isTeacher(currentUser) 

            ? `chats/${otherUserId}` 

            : `chats/${currentUser.uid}`;

        

        // –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î–º–æ —ñ—Å–Ω—É—é—á—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è

        try {

            const snap = await db.ref(chatPath).get();

            if (snap.exists()) {

                const messages = snap.val();

                Object.keys(messages).sort().forEach(key => {

                    renderMessage(messages[key], messagesDiv);

                });

            }

        } catch (e) {

            console.error("loadChatMessages error", e);

        }

        

        // –°–ª—É—Ö–∞—î–º–æ –Ω–æ–≤—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è

        chatListener = (snap) => {

            if (snap.exists()) {

                const messages = snap.val();

                messagesDiv.innerHTML = "";

                Object.keys(messages).sort().forEach(key => {

                    renderMessage(messages[key], messagesDiv);

                });

                messagesDiv.scrollTop = messagesDiv.scrollHeight;

            }

        };

        

        db.ref(chatPath).on("value", chatListener);

        

        // –ü—Ä–æ–∫—Ä—É—á—É—î–º–æ –¥–æ –Ω–∏–∑—É

        setTimeout(() => {

            messagesDiv.scrollTop = messagesDiv.scrollHeight;

        }, 100);

    }



    function renderMessage(msg, container) {

        const div = document.createElement("div");

        div.className = `message ${msg.from === "teacher" ? "teacher" : "student"}`;

        

        const isCurrentUser = (isTeacher(currentUser) && msg.from === "teacher") ||

                              (!isTeacher(currentUser) && msg.from === "student");

        

        div.innerHTML = `

            <div>${msg.text}</div>

            <div class="message-time">${new Date(msg.timestamp).toLocaleString("uk-UA")}</div>

        `;

        

        container.appendChild(div);

    }



    async function sendMessage(text, from) {

        if (!text.trim()) return;

        

        const chatPath = isTeacher(currentUser) 

            ? `chats/${selectedStudentId}` 

            : `chats/${currentUser.uid}`;

        

        const message = {

            text: text.trim(),

            from: from,

            timestamp: Date.now()

        };

        

        try {

            await db.ref(`${chatPath}/${Date.now()}`).set(message);

            

            // –û—á–∏—â–∞—î–º–æ –ø–æ–ª–µ –≤–≤–æ–¥—É

            if (isTeacher(currentUser)) {

                document.getElementById("teacher-message-input").value = "";

            } else {

                document.getElementById("student-message-input").value = "";

            }

        } catch (e) {

            console.error("sendMessage error", e);

            alert("–ü–æ–º–∏–ª–∫–∞ –≤—ñ–¥–ø—Ä–∞–≤–∫–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è");

        }

    }



    function showChatView() {

        if (!currentUser) {

            document.getElementById("chat-login-prompt").style.display = "block";

            document.getElementById("teacher-view").style.display = "none";

            document.getElementById("student-view").style.display = "none";

            return;

        }

        

        document.getElementById("chat-login-prompt").style.display = "none";

        

        if (isTeacher(currentUser)) {

            document.getElementById("teacher-view").style.display = "block";

            document.getElementById("student-view").style.display = "none";

            loadStudentsList();

        } else {

            document.getElementById("teacher-view").style.display = "none";

            document.getElementById("student-view").style.display = "block";

            loadChatMessages(currentUser.uid);

        }

    }



    // –û–±—Ä–æ–±–Ω–∏–∫–∏ –ø–æ–¥—ñ–π –¥–ª—è —á–∞—Ç—É

    const teacherSendBtn = document.getElementById("teacher-send-btn");

    const studentSendBtn = document.getElementById("student-send-btn");

    const backToStudentsBtn = document.getElementById("back-to-students");



    if (teacherSendBtn) {

        teacherSendBtn.addEventListener("click", () => {

            const input = document.getElementById("teacher-message-input");

            sendMessage(input.value, "teacher");

        });

        

        document.getElementById("teacher-message-input")?.addEventListener("keypress", (e) => {

            if (e.key === "Enter") {

                teacherSendBtn.click();

            }

        });

    }



    if (studentSendBtn) {

        studentSendBtn.addEventListener("click", () => {

            const input = document.getElementById("student-message-input");

            sendMessage(input.value, "student");

        });

        

        document.getElementById("student-message-input")?.addEventListener("keypress", (e) => {

            if (e.key === "Enter") {

                studentSendBtn.click();

            }

        });

    }



    if (backToStudentsBtn) {

        backToStudentsBtn.addEventListener("click", backToStudents);

    }




</script>



</body>

</html>
